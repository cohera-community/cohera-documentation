---
import type { ImageMetadata } from "astro";

interface Props {
  userID: string;
}
const { userID } = Astro.props as Props;

// Sample data for docs preview only
const users: Record<
  string,
  {
    userId: string;
    firstName: string;
    lastName: string;
    picture: ImageMetadata;
    bio: string;
    groups: string[];
  }
> = {
  mrGreenTea: {
    userId: "mrGreenTea",
    firstName: "John",
    lastName: "Doe",
    picture: (await import("../assets/profile-picture.jpg")).default,
    bio: "I love donuts!!",
    groups: ["admin", "soccer-player"],
  },
  ada: {
    userId: "ada",
    firstName: "Ada",
    lastName: "Lovelace",
    picture: (await import("../assets/profile-picture2.jpg")).default,
    bio: "Mathematician and early programmer.",
    groups: ["historian", "writer"],
  },
};

const user = users[userID] ?? users.mrGreenTea;
---

<article
  class="card not-content"
  aria-label={`Profile card for ${user.firstName} ${user.lastName}`}
>
  <img
    class="avatar"
    src={user.picture.src}
    alt={`${user.firstName} ${user.lastName} avatar`}
    width="64"
    height="64"
  />
  <div class="content">
    <h3 class="name">{user.firstName} {user.lastName}</h3>
    <p class="bio">{user.bio}</p>
    <div class="tags">
      {
        user.groups.map((g) => (
          <span class="tag" data-tag={g}>
            {g}
          </span>
        ))
      }
    </div>
  </div>
</article>

<style>
  .card {
    display: grid;
    grid-template-columns: 64px 1fr;
    gap: 0.75rem;
    align-items: center;
    padding: 0.75rem;
    border: 1px solid var(--sl-color-gray-5, #e5e7eb);
    border-radius: 0.75rem;
    background: var(--sl-color-bg, #fff);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    max-width: 560px;
  }
  .avatar {
    border-radius: 50%;
    object-fit: cover;
    width: 64px;
    height: 64px;
  }
  .content {
    min-width: 0;
  }
  .name {
    margin: 0 0 0.25rem;
    font-size: 1rem;
    line-height: 1.25rem;
  }
  .bio {
    margin: 0 0 0.5rem;
    color: var(--sl-color-gray-2, #475569);
    font-size: 0.9rem;
  }
  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
  }
  .tag {
    font-size: 0.75rem;
    background: var(--sl-color-gray-6, #f3f4f6);
    color: var(--sl-color-gray-1, #111827);
    padding: 0.1rem 0.5rem;
    border-radius: 999px;
    border: 1px solid var(--sl-color-gray-5, #e5e7eb);
  }
</style>
